package org.ietr.ME.psdf;

import std.util.Math.* ;

actor SAD () uint(size=8) MB, uint(size=8) Ref ==> uint(size=8) Val :
	int (size=32) MB_SZ = 16;
	int (size=32) cnt := 0;
	int (size=32) sad := 0;
	
	val: action MB:[i], Ref:[r] ==>
	guard
		cnt < MB_SZ * MB_SZ - 1
	do
		sad := sad + abs(i-r);
		cnt := cnt +1;
	end
	
	res: action ==> Val : [res]
	guard
		cnt = MB_SZ * MB_SZ - 1
	var
		int (size=32) res
	do
		res := sad;
		sad := 0;
		cnt := 0;
	end
	
end
